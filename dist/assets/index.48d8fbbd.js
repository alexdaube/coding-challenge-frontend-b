var j=Object.defineProperty;var _=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var y=(t,e,n)=>e in t?j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I=(t,e)=>{for(var n in e||(e={}))B.call(e,n)&&y(t,n,e[n]);if(_)for(var n of _(e))L.call(e,n)&&y(t,n,e[n]);return t};var b=(t,e,n)=>(y(t,typeof e!="symbol"?e+"":e,n),n);import{f as N,u as v,j as s,S as l,a as o,T as p,d as O,b as E,c as k,B as x,C as F,i as G,e as U,g as H,h as $,k as M,R as w,r as m,M as z,l as V,m as A,n as q,F as W,o as J,p as K,q as Q,I as X,s as Y}from"./vendor.f75c7847.js";const Z=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}};Z();const ee="https://napi.busbud.com",te={"Content-Type":"application/json",Accept:"application/vnd.busbud+json; version=2; profile=https://schema.busbud.com/v2/","X-Busbud-Token":"PARTNER_c9g6z7V0SNqUlnar2EFsxw"};class S{static async get(e){return await(await fetch(`${this.API_BASE_URL}${e}`,{method:"GET",headers:I({},this.headers)})).json()}}b(S,"API_BASE_URL",ee),b(S,"headers",te);const C=({city:t,locationId:e,departureTime:n,locations:i})=>{var r;return{city:t,location:(r=i.find(a=>a.id===e).name)!=null?r:"",time:new Date(n)}},ne=(t,{operators:e,locations:n,originCity:i,arrivalCity:r})=>{var a;return{id:t.id,operator:(a=e.find(c=>c.id===t.operator_id).name)!=null?a:"",origin:C({locations:n,city:i,locationId:t.origin_location_id,departureTime:t.departure_time}),arrival:C({locations:n,city:r,locationId:t.destination_location_id,departureTime:t.arrival_time}),availableSeats:t.available_seats,price:t.prices.total/100,currency:t.prices.currency}};class re{static async list(e,n,i){var c,d;const r=await S.get(`/x-departures/${e}/${n}/${N(i,{representation:"date"})}`),a={operators:r.operators,locations:r.locations,originCity:(c=r.cities.find(u=>u.id===r.origin_city_id).name)!=null?c:"",arrivalCity:(d=r.cities.find(u=>u.id===r.destination_city_id).name)!=null?d:""};return r.departures.map(u=>ne(u,a))}}const oe=({departure:t})=>{const{operator:e,origin:n,arrival:i,availableSeats:r,price:a,currency:c}=t,{t:d}=v("common");return s(l,{direction:"column",gap:1,p:2,my:1,boxShadow:5,borderRadius:1,width:"100%",children:[s(l,{direction:"row",justifyContent:"space-between",children:[o(p,{variant:"h5",fontWeight:700,children:e}),s(p,{variant:"h6",fontWeight:700,color:"primary.light",children:[a,"$ - ",c]})]}),s(l,{direction:"row",justifyContent:"flex-start",alignItems:"center",gap:1,children:[o(O,{sx:{color:"primary.light"}}),o("span",{children:E(n.time,"HH:mm")}),o("span",{children:n.city}),!!n.location&&s("span",{children:["- ",n.location]})]}),s(l,{direction:"row",justifyContent:"flex-start",alignItems:"center",gap:1,children:[o(k,{sx:{color:"success.main"}}),o("span",{children:E(i.time,"HH:mm")}),o("span",{children:i.city}),!!i.location&&s("span",{children:[" - ",i.location]})]}),o(l,{direction:"row",justifyContent:"flex-end",alignItems:"flex-end",children:r>0?o(x,{variant:"contained",size:"small",color:"secondary",children:d("bookIt")}):o(x,{variant:"contained",size:"small",color:"inherit",disabled:!0,children:d("soldOut")})})]})},ae=(t,e)=>t.price-e.price;function ie({departures:t}){const{t:e}=v("common");return s(l,{direction:"column",justifyContent:"center",alignItems:"center",width:{xs:"100%",md:"50%"},p:3,children:[s(l,{direction:"row",justifyContent:"space-between",alignItems:"center",width:"100%",pt:2,pb:1,children:[s(p,{variant:"h6",children:[t.length," ",e("departuresFound")]}),o(F,{label:e("cheapest")})]}),t.sort(ae).map(n=>o(oe,{departure:n},n.id))]})}class R{static setItem(e,n){const i=JSON.stringify(n);window.localStorage.setItem(e,i)}static getItem(e){try{const n=window.localStorage.getItem(e);return JSON.parse(n)}catch{return null}}static removeItem(e){window.localStorage.removeItem(e)}}const se={en:{common:{departures:"departures",travelFrom:"Travel from",to:"to",onDate:"on {{date, PPP}}",cheapest:"Cheapest",departuresFound:"departures found",soldOut:"sold out",bookIt:"book it"}},fr:{common:{departures:"d\xE9parts",travelFrom:"Voyager de",to:"\xE0",onDate:"le {{date, PPP }}",cheapest:"Le moins cher",departuresFound:"d\xE9parts trouv\xE9s",soldOut:"\xE9puis\xE9",bookIt:"r\xE9server"}}},ce={en:U,fr:H},P="language",D="en";var T;const le={lng:(T=R.getItem(P))!=null?T:D,fallbackLng:D,debug:!1,defaultNS:"common",fallbackNS:"common",interpolation:{escapeValue:!1,format:(t,e,n)=>{if(G(t)&&e&&n){const i=ce[n];return E(t,e,{locale:i})}return t}},react:{defaultTransParent:"span",useSuspense:!1},resources:se},h=$.createInstance();h.use(M).init(I({},le)).then(t=>t).catch(t=>console.error(t));const de=({onStart:t,open:e,origin:n,destination:i,date:r})=>{const{t:a}=v("common"),[c,d]=w.useState(h.language),u=m.exports.useCallback(async(ye,f)=>{await h.changeLanguage(f),d(f),R.setItem(P,f)},[]);return o(z,{disablePortal:!0,open:e,sx:{display:"flex",p:1,alignItems:"center",justifyContent:"center"},children:s(l,{direction:"column",justifyContent:"center",alignItems:"center",gap:1,bgcolor:"background.paper",width:400,borderRadius:1,boxShadow:5,p:4,children:[s(V,{color:"primary",value:c,exclusive:!0,onChange:u,children:[o(A,{value:"en",children:"English"}),o(A,{value:"fr",children:"Fran\xE7ais"})]}),o(q,{sx:{height:120,width:120,color:"primary.light"}}),s(p,{textAlign:"center",children:[a("travelFrom")," ",o("b",{children:n})," ",a("to")," ",o("b",{children:i})," ",a("onDate",{date:r})]}),o(x,{variant:"contained",size:"large",fullWidth:!0,color:"primary",onClick:t,children:a("departures")})]})})},ue="f2m673",pe="f25dvk",me="Qu\xE9bec",he="Montr\xE9al",g=new Date;g.setDate(g.getDate()+1);function ge(){const[t,e]=m.exports.useState(!0),[n,i]=m.exports.useState(),r=m.exports.useCallback(async()=>{e(!1);const a=await re.list(ue,pe,g);i(a)},[]);return s(W,{children:[o(J,{}),o(l,{direction:"row",justifyContent:"center",alignItems:"center",width:"100%",height:40,bgcolor:"#282c34",color:"white",children:o(p,{variant:"h6",children:"Bus Buddy"})}),o(l,{direction:"row",justifyContent:"center",alignItems:"center",width:"100%",children:n?o(ie,{departures:n}):o("div",{})}),o(de,{onStart:r,open:t,origin:me,destination:he,date:g})]})}const fe=K();Q.render(o(w.StrictMode,{children:o(X,{i18n:h,children:o(Y,{theme:fe,children:o(ge,{})})})}),document.getElementById("root"));
